<!-- Função do Django para estender o código do base.html, como
resultado, mostrando o menu e o rodapé já pronto nesse código
HTML. -->
{% extends 'djreservas/base.html' %}
<!-- Função do Django para início dos novos códigos no index.html -->
{% block content %}

</br>

<div class="row">
  <div class="col-md-9">

    <section>
      </br>
      <div class="container-fluid">
          <header>
            <h5 class="display-4 mb-4 text-center">{{nome_mes}}</h5>
            <div class="row d-none d-sm-flex p-1 bg-dark text-white">
              {% for dia in semana %}
                <h5 class="col-sm p-1 text-center">{{dia}}</h5>
              {% endfor %}
            </div>
          </header>
          <div class="row border border-right-0 border-bottom-0">
            {% for data in calendario %}
              {% if data.dia.month == mes and data.dia.weekday != 5 and data.dia.weekday != 6 and data.dia >= hoje %}  
                <div class="day col-sm p-2 border border-left-0 border-top-0 text-truncate">
              {% else %}
                <div class="day col-sm p-2 border border-left-0 border-top-0 text-truncate d-none d-sm-inline-block bg-light text-muted">
              {% endif %}
                  <h5 class="row align-items-center">
                    <span class="date col-1">{{data.dia.day}}</span>
                    <small class="col d-sm-none text-center text-muted">{{data.dia.weekday}}</small>
                    <span class="col-1"></span>
                  </h5>
                  {% if not data.reservas %}
                    <p class="d-sm-none">No events</p>
                  {% else %}
                    {% for reserva in data.reservas %}
                      <a class="event d-block p-1 pl-2 pr-2 mb-1 rounded text-truncate small bg-success text-white" title="{{reserva.sala.nome}}">
                        {{reserva.sala.nome}}
                      </a>
                    {% endfor %}
                  {% endif %}
                </div>
                {% if data.dia.weekday == 5 %}
                  <div class="w-100"></div>
                {% endif %}
            {% endfor %}
          </div>
        </div>    
    </section>
  </div>

  <div class="col-md-3">
    <section>
      <h4>Multimeios - Reservas</h4>

      <form action="{% url 'djreservas:index' %}" method="post">
        </br>
        {% csrf_token %}
        <div class="form-group">
          <strong><label for="data_reserva">Data para Reserva</label></strong>
          <div class="input-group date" id="data_reserva" data-target-input="nearest">
            <input name="data_reserva" type="text" class="form-control datetimepicker-input" value="{{ form.data_reserva.value }}" data-target="#data_reserva"/>
            <div class="input-group-append" data-target="#data_reserva" data-toggle="datetimepicker">
              <div class="input-group-text"><i class="fa fa-calendar"></i></div>
            </div>
          </div>
          {% for error in form.data_reserva.errors %}
            <span class="text-danger">{{error}}</span>
          {% endfor %}
        </div>
          
        <script>
          $(document).ready(function(){
            $("#data_reserva").datetimepicker({
              format: "DD/MM/YYYY", 
              locale: "pt-BR"
            })
          })
        </script>
      
        <div class="row">
          <div class='col-md-6'>
            <div class="form-group">
              <strong><label for="hora_inicio">Hora de Início</label></strong>
              <div class="input-group date" id="hora_inicio" data-target-input="nearest">
                <input name="hora_inicio" type="text" class="form-control datetimepicker-input" value="{{ form.hora_inicio.value }}" data-target="#hora_inicio"/>
                <div class="input-group-append" data-target="#hora_inicio" data-toggle="datetimepicker">
                  <div class="input-group-text"><i class="fa fa-clock-o"></i></div>
                </div>
              </div>
              {% for error in form.hora_inicio.errors %}
                <span class="text-danger">{{error}}</span>
              {% endfor %}
            </div>
          </div>
          <div class='col-md-6'>
            <div class="form-group">
              <strong><label for="hora_fim">Hora de Fim</label></strong>
              <div class="input-group date" id="hora_fim" data-target-input="nearest">
                <input name="hora_fim" type="text" class="form-control datetimepicker-input" value="{{ form.hora_fim.value }}" data-target="#hora_fim"/>
                <div class="input-group-append" data-target="#hora_fim" data-toggle="datetimepicker">
                  <div class="input-group-text"><i class="fa fa-clock-o"></i></div>
                </div>
              </div>
              {% for error in form.hora_fim.errors %}
                <span class="text-danger">{{error}}</span>
              {% endfor %}
            </div>
          </div>
        </div>
        <script>
          $(document).ready(function(){
              $("#hora_inicio").datetimepicker({
                format: "HH:mm", 
                locale: "pt-BR",
                stepping:"30",
              })
            })
            $(document).ready(function(){
              $("#hora_fim").datetimepicker({
                format: "HH:mm", 
                locale: "pt-BR",
              })
            })
        </script>
      
        <div class="form-group">
          <strong><label for="sala">Salas Multimeios</label></strong>
          <select name="sala" class="custom-select" id="sala">
            <option value="0">-- Escolha a Sala --</option>
            {% for sala in salas %}
              <option 
              {% if sala.id|stringformat:"i" == form.sala.value %}
                selected 
              {% endif %} 
              value="{{sala.id}}">
                {{sala.nome}}
            </option>
            {% endfor %}
          </select>
          {% for error in form.sala.errors %}
            <span class="text-danger">{{error}}</span>
          {% endfor %}
        </div>
          
        <div class="form-group">
          <strong><label for="motivo">Motivo da Reserva</label></strong>
          <textarea name="motivo" placeholder="Coloque o motivo de sua reserva." class="form-control" id="motivo" rows="3">{% if form.motivo.value != None %}{{form.motivo.value}}{% endif %}</textarea>
          {% for error in form.motivo.errors %}
            <span class="text-danger">{{error}}</span>
          {% endfor %}
        </div>

        <button class="btn btn-info" type="submit">Pedir Reserva</button>
      
      </form>
    </section>
  </div>
</div>
</br>
{% endblock %}